There's no doubt that <a href="http://www.matroska.org/">Matroska</a> is a great open source container that can store anything (and the kitchen sink too). Unfortunately, as of today, it's not well supported by consumer devices. So, unless you decide to use your computer for viewing, you need to convert <span style="font-style: italic;">mkv</span> files into something that your device can play.<br /><br />The purpose of this article is to show how to do that for the PS3. It may very well work on other devices, but don't blame if it doesn't :)<br /><br />This article is a work in progress. Are covered so far:<br /><ul><li><span>Example #1: (mkv file, H.264, AC3) --> (MPEG-2 TS file, H.264, AC3)</span></li><li><span>Example #2: (mkv file, H.264, AC3) --> (MPEG-2 PS file, H.264, AC3)</span></li><li><span>Example #3: (mkv file, H.264, AC3) --> (MP4 file, H.264, AAC)<br /><br /></span></li><li><span>Example #4: (mkv file, H.264 level 5.1, DTS 5.1) --> (</span><span>MP4</span><span> file, H.264 level 4.1, AAC)<br /><br /></span></li><li><span>Example #5: </span><span>(mkv file, MPEG-2 video, DTS 5.1 + AC3) --> (</span><span>MPEG-2 PS</span><span> file, </span><span>MPEG-2 video,</span><span> AC3)</span></li><li><span>Example #6: (mkv file, MPEG-2 video, DTS 5.1 + AC3) --> (MPEG-2 PS file, </span><span>MPEG-2 video,</span><span> AC3 5.1)</span></li><li><span>Example #7: (mkv file, MPEG-2 video, DTS 5.1 + AC3) --> (MP4 file, H.264 video, AAC)<br /></span></li></ul><span style="font-weight: bold;">1) Pre-requisites</span><br /><br />Before we start, let's prepare our toolbox:<br /><ul><li><span style="font-style: italic;">mediainfo</span> : the best tool to learn everything there is know on the true nature of your media files. I showed you how to build it <a href="http://juliensimon.blogspot.com/2009/01/howto-compiling-mediainfo-cli-gui-on.html">in a previous article</a>.<br /><br /></li><li><span style="font-style: italic;">mkvtoolnix</span> : a collection of tools to inspect, extract and build mkv files.<br /><code><br />ubuntu% <span style="font-weight: bold;">sudo apt-get install mkvtoolnix</span><br /></code><br /></li><li><span style="font-style: italic;">ffmpeg</span> : the best general-purpose audio &amp; video transcoding tool. I also showed you how to build it <a href="http://juliensimon.blogspot.com/2008/12/howto-compiling-ffmpeg-x264-mp3-xvid.html">in a previous article</a>.<br /><br /></li><li><span style="font-style: italic;">MP4Box</span> : a nice MP4 manipulation tool, which we'll use for multiplexing.<br /><br /><code>ubuntu% <span style="font-weight: bold;">sudo apt-get install gpac<br /><br /></span></code></li><li><span style="font-style: italic;">tsMuxer</span> : another great tool for multiplexing. You can download a pre-compiled version <a href="http://www.smlabs.net/tsmuxer_en.html">here</a>. Just copy the <span style="font-style: italic;">tsMuxer</span> binary in <span style="font-style: italic;">/usr/local/bin</span>.</li></ul><span style="font-weight: bold;">2) Audio &amp; video formats supported by the PS3<br /></span><br />Let's take at a look at what the PS3 actually supports, That way, we will avoid any unnecessary transcoding. Remember that the content we're dealing has already been compressed, so any additional processing would certainly degrade quality. Also, video encoding takes a LOT of time, especially with HD files...<br /><br />According to the <a href="http://manuals.playstation.net/document/en/ps3/current/video/filetypes.html">online manual</a>, the PS3 supports:<br /><ul><li class="none">MPEG-1 video, with MPEG-1 layer 2 audio<br /><br /></li><li class="none">MP4 container : H.264/MPEG-4 AVC High Profile video, with AAC LC audio<br /><br /></li><li class="none">MPEG-2 PS container (aka VOB file): MPEG-2 video, with either one of these audio formats : MPEG-2 Audio Layer 2, AAC LC, AC3 (Dolby Digital), LPCM audio<br /><br /></li><li class="none">MPEG-2 TS container :<br /></li><ul><li class="none">MPEG-2 video, with either one of these audio formats : MPEG-2 Audio Layer 2, AAC LC, AC3 (Dolby Digital)<br /></li><li class="none">H.264/MPEG-4 AVC video, with AAC LC audio<br /></li></ul></ul><ul><li>AVCHD, AVI, DivX and VC-1 (WMV), which are less likely to be encountered in <span style="font-style: italic;">mkv</span> files.</li></ul>So what does this mean? Well, here are a few rules:<br /><ul><li>Obviously, the PS3 does not support the <span style="font-style: italic;">mkv</span> container. Any input file in this format must be at least remuxed.<br /><br /></li><li>The PS3 does support DTS audio, but only when played from actual disks, i.e. not from files. Thus, any input stream in this format must be transcoded.<br /><br /></li><li>MP3 audio, Vorbis audio and so on are not supported and must be transcoded.<br /><br /></li><li>If you want AC3 audio, you must use a MPEG-2 TS/PS container.<br /><br /></li><li>If you want to stick with the MP4 container, you really have no options but H.264 video and AAC audio.<br /></li></ul><span style="font-weight: bold;">3) Getting things done<br /><br /></span>Now that we know what is supported and what isn't, we can pick the right solution, i.e. preserve the quality of the input file and save time.<br /><br />The approach will always be the same:<br /><ul><li>inspect the <span style="font-style: italic;">mkv</span> file and identify the nature of its streams,<br /><br /></li><li>extract the video stream and the audio stream (possibly among several available ones)<br /><br /></li><li>depending on what your audio setup supports, select a format for the audio output (AC3 will do you no good if you don't have a Dolby Digital setup)<br /><br /></li><li>based on the previous item and on what the PS3 supports, transcode the audio and/or video stream<br /><br /></li><li>remux the audio and the video stream into a container supported by the PS3<br /><br /></li><li>play the file :)</li></ul>Let's look at real-life examples and sort them out!<br /><br /><span style="font-weight: bold;">4) Example #1: (mkv file, H.264, AC3) --> (MPEG-2 TS file, H.264, AC3)<br /><br /></span>Let's look at our input file with <span style="font-style: italic;">mediainfo</span> (edited for brevity):<br /><code><br />ubuntu% <span style="font-weight: bold;">mediainfo video.mkv</span><br />General<br />Complete name                    : video.mkv<br />Format                           : Matroska<br />File size                        : 1.09 GiB<br />Duration                         : 41mn 48s<br />Overall bit rate                 : 3 740 Kbps<br /><br />Video<br />Format                           : AVC<br />Format/Info                      : Advanced Video Codec<br />Format profile                   : High@L3.1<br />Codec ID                         : V_MPEG4/ISO/AVC<br />Width                            : 1 280 pixels<br />Height                           : 720 pixels<br />Frame rate                       : 23.976 fps<br /><br />Audio<br />Format                           : AC-3<br />Format/Info                      : Audio Coding 3<br />Codec ID                         : A_AC3<br />Channel(s)                       : 6 channels<br />Channel positions                : Front: L C R, Surround: L R, LFE<br /></code><br />You can also use <span style="font-style: italic;">mkvinfo</span> (part of the <span style="font-style: italic;">mkvtoolnix</span> package):<br /><code><br />ubuntu% <span style="font-weight: bold;">mkvinfo</span><span style="font-weight: bold;"> video.mkv </span><br />|  + Track number: 1<br />|  + Track type: video<br />|  + Codec ID: V_MPEG4/ISO/AVC<br />|  + Video track<br />|   + Pixel width: 1280<br />|   + Pixel height: 720<br /><br />|  + Track number: 2<br />|  + Track type: audio<br />|  + Codec ID: A_AC3<br /><br /></code>So what is this file? It's a 2-track <span style="font-style: italic;">mkv</span> file: track 1 is H.264 video (1280x720), track 2 is AC3 6-channel audio. Both formats are supported by the PS3, and since they're high quality it would be a shame to transcode them. Let's try a simple remuxing into... no, not MP4 because it doesn't support AC3: we have to use MPEG-2 TS.<br /><br />This is where <span style="font-style: italic;">tsMuxer</span> comes in. The good thing about it is that we don't have to extract the individual streams, this will be handled for us.<br /><br />Although <span style="font-style: italic;">tsMuxer </span><span>is</span> a command-line tool, it can only read its parameters from a file (let's call it <span style="font-style: italic;">tsmuxer.meta</span>):<br /><pre>MUXOPT --no-pcr-on-video-pid --new-audio-pes --vbr<br />V_MPEG4/ISO/AVC, video.mkv, level=4.1, insertSEI, contSPS, track=1, lang=eng<br />A_AC3, video.mkv, track=2, lang=eng<br /></pre>Ignore the first line and look at the next two. On each of them, we're describing a stream and telling <span style="font-style: italic;">tsMuxer</span> what format it is and where to find it (file name and track number). Don't worry, this information is dumped by <span style="font-style: italic;">mediainfo</span> or <span style="font-style: italic;">mkvinfo</span> (go back and check), so you shouldn't have any problem writing the file :)<br /><br />Now, we're ready to remux:<br /><code><br />ubuntu% <span style="font-weight: bold;">tsMuxeR tsmuxer.meta video.m2ts<br /></span><span style="font-style: italic;">output removed</span><span style="font-weight: bold;"><br />Mux successful complete.<br />Muxing time: 5 min 25 sec<br /></span></code><br />That's all: this file plays fine on the PS3 (I'm streaming it right now using <a href="http://juliensimon.blogspot.com/2008/12/mediatomb-012-on-ps3-video-thumbnails.html"><span style="font-style: italic;">mediatomb</span></a>). Total time: about 10 minutes. And we preserved the original quality of the input file.<br /><br /><span style="font-weight: bold;">5) Example #2: (mkv file, H.264, AC3) --> (MPEG-2 PS file, H.264, AC3)<br /><br /></span>Here, we'll use the same input file as example #1, but we'll remux it to MPEG2-PS (aka the VOB format). This is also interesting if you want to do without <span style="font-style: italic;">tsMuxer</span>.<span style="font-weight: bold;"><br /><br /></span><span style="font-weight: bold;"></span>Wouldn't it be nice to be able to just do this?<br /><br /><code>ubuntu% <span style="font-weight: bold;">ffmpeg -i video.mkv -acodec copy -vcodec copy -r 23.976 -f vob video.mpg<br /></span><span>[NULL @ 0x8076d00]error, non monotone timestamps 15030 >= 7470<br />av_interleaved_write_frame(): Error while opening file</span></code><br /><br /><span style="font-weight: bold;"></span>As you can see, it doesn't work. Not sure why... Let's use a two-step solution instead. First, let's extract the streams from the <span style="font-style: italic;">mkv</span> file:<br /><br /><code>ubuntu% <span style="font-weight: bold;">mkvextract tracks video.mkv 1:video.h264 2:audio.ac3<br /></span></code><br />Now, let's remux the streams into a MPEG2-PS container:<br /><br /><code><span>ubuntu%</span><span style="font-weight: bold;"> ffmpeg -i video.h264 -i audio.ac3 -map 0.0:0 -map 1.0:0 -acodec copy -vcodec copy -r 23.976 -f vob video.mpg</span></code><span style="font-weight: bold;"><br /><br /></span>That's it. This solution is a little bit longer than the previous one, but it works and doesn't require you to write the <span style="font-style: italic;">tsMuxer</span> meta file :)<span style="font-weight: bold;"><br /><br /></span><span style="font-weight: bold;">6) Example #3: (mkv file, H.264, AC3) --> (MP4 file, H.264, AAC)<br /><br /></span>Here, we'll also use the same input file as example #1. For whatever reason, we need to use the MP4 container (maybe to be able to play that file on another device). This means that we must also drop AC3 in favor of AAC.<br /><br />We have already inspected the file, so let's extract the streams:<br /><br /><code>ubuntu% <span style="font-weight: bold;">mkvextract tracks video.mkv 1:video.h264 2:audio.ac3</span></code><br /><br />Then, we need to transcode the audio stream to AAC (let's use high-quality VBR):<br /><code><br />ubuntu% <span style="font-weight: bold;">ffmpeg -i audio.ac3 -acodec libfaac -aq 255 -ar 44100 -ac 2 -async 1 -vsync 1 audio.aac </span><br /></code><br />Now, we'll use <span style="font-style: italic;">MP4Box</span> to remux the initial video stream and the new audio stream into an MP4 container:<br /><code><br />ubuntu% <span style="font-weight: bold;">MP4Box -new -add audio.aac -add video.h264 -fps 23.976 video.mp4<br /></span><span>AAC import - sample rate 44100 - MPEG-4 audio - 2 channels<br />AVC-H264 import - frame size 1280 x 720 at 23.976 FPS<br />Import results: 60146 samples - Slices: 1027 I 36894 P 22225 B - 1 SEI - 968 IDR<br />Stream uses B-slice references - max frame delay 2<br />Saving video-ps3.mp4: 0.500 secs Interleaving</span><span style="font-weight: bold;"><br /></span></code><br />That's it :)<br /><br /><span style="font-weight: bold;">7) Example #4: (mkv file, H.264 level 5.1, DTS 5.1) --> (MP4 file, H.264 level 4.1, AAC)<br /><br /></span>Here, we'll use a new sample file (for the sake of brevity, I will just display the relevant lines):<br /><pre>ubuntu% <span style="font-weight: bold;">mediainfo video2.mkv</span><br />General<br />Complete name                    : video2.mkv<br />Format                           : Matroska<br /><br />Video<br />Format                           : AVC<br />Format/Info                      : Advanced Video Codec<br />Format profile                   : High@L5.1<br />Muxing mode                      : Container profile=Unknown@5.1<br />Codec ID                         : V_MPEG4/ISO/AVC<br />Frame rate                       : 23.976 fps<br /><br />Audio<br />Format                           : DTS<br />Format/Info                      : Digital Theater Systems<br />Codec ID                         : A_DTS<br /><br />ubuntu% <span style="font-weight: bold;">mkvinfo video2.mkv</span><br /><br />| + A track<br />|  + Track number: 1<br />|  + Track type: video<br />|  + Codec ID: V_MPEG4/ISO/AVC<br /><br />| + A track<br />|  + Track number: 2<br />|  + Track type: audio<br />|  + Codec ID: A_DTS<br /></pre>OK, so track 1 is H.264 video and track 2 is DTS audio. Let's extract them:<br /><br /><code>ubuntu% <span style="font-weight: bold;">mkvextract tracks video2.mkv 1:video.h264 2:audio.dts<br /><br /></span></code>According to what I've said earlier, H.264 is supported, so all we have to do is to transcode the audio... right?<br /><br />Wrong :) Take another look at the video stream: format profile is "<span style="font-style: italic;">High @ Level 5.1</span>" (note: this has nothing to do with 5.1 audio!). Unfortunately, the PS3 cannot play anything above Level 4.1, so this video stream needs to be fixed. Does this mean we have to reencode it and lose quality?<br /><br />Nope :) We're going to change the level right in the binary file. For this purpose, you need an hexadecimal editor. I recommend <span style="font-style: italic;">ghex2</span>, which can easily be installed with '<span style="font-style: italic;">sudo apt-get install ghex</span>'.<br /><br />just go '<span style="font-style: italic;">ghex2 video.h264</span>' and look at the first 8 bytes of the file: they should read '<span style="font-style: italic;">00 00 00 01 67 64 00 33</span>'. Hmm... <span style="font-style: italic;">0x33</span> in decimal is '<span style="font-style: italic;">51</span>', which means 'level 5.1' : let's change this byte to <span style="font-style: italic;">0x29</span> ('<span style="font-style: italic;">41</span>' in decimal) to 'downgrade' the video to level 4.1 and save the file.<br /><br />Now, let's take care of the audio stream. As above, we'll use high quality VBR:<br /><code><br />ubuntu% <span style="font-weight: bold;">ffmpeg -i audio.dts -acodec libfaac -aq 255 -ar 44100 -ac 2 -async 1 -vsync 1 audio.aac </span><br /></code><br />The last operation is to remux the initial video stream and the new audio stream into an MP4 container:<br /><code><br />ubuntu% <span style="font-weight: bold;">MP4Box -new -add audio.aac -add video.x264 -fps 23.976 video.mp4<br /></span><span><br /></span></code>That's it. I'm not sure the level hack will always work, but it did in this case and we avoided any video transcoding.<br /><br /><span style="font-weight: bold;">8) Example #5: (mkv file, MPEG-2 video, DTS 5.1+ AC3) --> (MPEG-2 PS file, </span><span style="font-weight: bold;">MPEG-2 video,</span><span style="font-weight: bold;"> AC3)<br /><br /></span>Let's take a look at this one (output edited for brevity)<br /><pre>ubuntu% <span style="font-weight: bold;">mediainfo video3.mkv </span><br />General<br />Complete name                    : video3.mkv<br />Format                           : Matroska<br />File size                        : 73.9 MiB<br />Duration                         : 50s 240ms<br />Overall bit rate                 : 12.3 Mbps<br /><br />Video<br />Format                           : MPEG Video<br />Format version                   : Version 2<br />Format profile                   : Main@High<br />Format settings, Matrix          : Default<br />Codec ID                         : V_MPEG2<br />Width                            : 1 920 pixels<br />Height                           : 1 080 pixels<br /><br />Audio #1<br />Format                           : DTS<br />Format/Info                      : Digital Theater Systems<br />Codec ID                         : A_DTS<br />Language                         : Russian<br /><br />Audio #2<br />Format                           : AC-3<br />Format/Info                      : Audio Coding 3<br />Codec ID                         : A_AC3<br />Language                         : English<br /><br />ubuntu% <span style="font-weight: bold;">mkvinfo video3.mkv </span><br />|  + Track number: 1<br />|  + Track type: video<br />|  + Codec ID: V_MPEG2<br /><br />|  + Track number: 2<br />|  + Track type: audio<br />|  + Codec ID: A_DTS<br /><br />|  + Track number: 3<br />|  + Track type: audio<br />|  + Codec ID: A_AC3<br /></pre>Track #1 is full HD MPEG-2 video, track #2 is DTS audio in Russian and track #3 is AC3 audio in English. Let's extract them:<br /><br /><code>ubuntu% <span style="font-weight: bold;">mkvextract tracks video3.mkv 1:video.mpeg 2:audio.dts 3:audio.ac3</span></code><br /><br />If like me you don't speak Russian, you'll pick track #3 :) If you do speak Russian, please refer to the next example for DTS-->AC3 conversion.<br /><br />One option would be to remux tracks #1 and #3 into an MPEG-2 TS container (like we did in example #1). Unfortunately, <span style="font-style: italic;">tsMuxer</span> chokes on the video stream ('<span style="font-style: italic;">Can't detect stream type</span>').<br /><br />Let's try to remux in an MPEG-2 PS container. For this, we'll use <span style="font-style: italic;">ffmpeg</span> but without any transcoding:<br /><br /><code>ubuntu%<span style="font-weight: bold;"> ffmpeg -i video.mpeg -i audio.ac3 -map 0.0:0 -map 1.0:0 -acodec copy -vcodec copy -f vob video.mpg<br /><br /></span></code>That's it!<br /><br /><span style="font-weight: bold;">9) Example #6: (mkv file, MPEG-2 video, DTS 5.1 + AC3) --> (MPEG-2 PS file, </span><span style="font-weight: bold;">MPEG-2 video,</span><span style="font-weight: bold;"> AC3 5.1)<br /><br /></span>We'll use the same input file as in example #5, but this time we'll use convert the DTS audio stream and convert it to AC3.<br /><br />Let's take another look at the DTS stream:<br /><code><br />ubuntu% <span style="font-weight: bold;">mediainfo audio.dts </span><br />General<br />Complete name                    : audio.dts<br />Format                           : DTS<br />Format/Info                      : Digital Theater Systems<br />File size                        : 9.04 MiB<br />Duration                         : 49s 381ms<br />Overall bit rate                 : 1 536 Kbps<br /><br />Audio<br />Format                           : DTS<br />Format/Info                      : Digital Theater Systems<br />Bit rate mode                    : Constant<br />Bit rate                         : 1 536 Kbps<br />Channel(s)                       : 6 channels<br />Channel positions                : Front: L C R, Surround: L R, LFE<br />Sampling rate                    : 48.0 KHz<br />Resolution                       : 16 bits<br /><br /></code>Since the DTS stream has 6 channels, we can either transcode it to 2-channel AC3 or 6-channel AC3. Let me show you both:<br /><code><br />ubuntu% <span style="font-weight: bold;">ffmpeg -i audio.dts -acodec ac3 -ar 48000 -ab 448k -ac 2 audio-2ch.ac3</span></code><br /><code><br />ubuntu% <span style="font-weight: bold;">ffmpeg -i audio.dts -acodec ac3 -ar 48000 -ab 448k -ac 6 audio-6ch.ac3</span></code><br /><br />448 KBit/s is the maximum authorized AC3 bitrate for DVDs. However, with the Playstation 3, we could go up to 640Kbit/s.<br /><br />Now, let's remux the video and audio streams (I'll use 6-channel AC3 here):<br /><br /><code>ubuntu%<span style="font-weight: bold;"> ffmpeg -i video.mpeg -i audio-6ch.ac3 -map 0.0:0 -map 1.0:0 -acodec copy -vcodec copy -f vob video.mpg<br /><br /></span></code>That's it.<br /><br />1<span style="font-weight: bold;">0) Example #7: (mkv file, MPEG-2 video, DTS 5.1 + AC3) --> (MP4 file, H.264 video, AAC)</span><br /><br />We'll use the same input file as in example #5. Let's assume that - like in example #3 - we need to use the MP4 container. This means that we must convert the video stream to H.264 and our preferred audio stream (AC3 for this purpose) to AAC.<br /><br />Please note that this is not the best option! The video compression will be lossy and all the longer that we're dealing with a 1920x1080 video stream. As far as audio is concerning, we're moving from 6-channel AC3 to stereo AAC. So, unless you <span style="font-weight: bold;">really</span> need the MP4 container, I strongly suggest that you use the solution described in example #6.<br /><br />Anyway, let's get started and extract the MPEG-2 and AC3 streams:<br /><code><br />ubuntu% <span style="font-weight: bold;">mkvextract tracks video3.mkv 1:video.mpeg 3:audio.ac3</span><br /></code><br />Then, let's encode the audio stream to AAC:<br /><code><br />ubuntu% <span style="font-weight: bold;">ffmpeg -i audio.ac3 -acodec libfaac -aq 255 -ar 44100 -ac 2 -async 1 -vsync 1 audio.aac</span><br /></code><br />Now, the big one: encoding the MPEG-2 stream to H.264:<br /><code><br />ubuntu% <span style="font-weight: bold;">ffmpeg -i video.mpeg -f rawvideo - | x264  --level 4.1 --crf 21 --bframes 16 --b-pyramid --ref 4 --mixed-refs --weightb --partitions all --threads 2 -o video.h264 - 1920x1080</span><br /></code><br />Let's explain this line a bit: as you can see, we're using <span style="font-style: italic;">ffmpeg</span> to decode the video stream to raw video and we're piping the output into the <span style="font-style: italic;">x264</span> encoder. The reason for this is avoid any H.264 default value that could be set by <span style="font-style: italic;">ffmpeg</span>: indeed, piping guarantees that all H.264 flags will be set by <span style="font-style: italic;">x264</span>.<br /><br />What about the <span style="font-style: italic;">x264</span> flags? '<span style="font-style: italic;">--level 4.1</span>' sets the H.264 level (the PS3 can't play anything above 4.1, please see example #4 for more information). '<span style="font-style: italic;">--crf 21</span>' select Constant Rate Factor encoding, with default quality. '<span style="font-style: italic;">--bframes 16 --b-pyramid --ref 4 --mixed-refs --weightb --partitions all</span>' are frame options which seem to strike the right balance between quality and encoding time (please see <a href="http://juliensimon.blogspot.com/2009/01/x264-benchmarks-individual-flags-motion.html">this article</a> for more information). Finally, '<span style="font-style: italic;">--threads 2</span>' will create 2 encoding threads.<br /><br />FYI, on a dual-core PC @ 1.83 GHz, this command took 8 minutes to encode a 50-second video! Now you understand why you don't want to do this unless you have no other option.<br /><br />Now, the final step: remuxing into an MP4 container<br /><code><br />ubuntu% <span style="font-weight: bold;">MP4Box -new -add video.h264 -add audio.aac -fps 25 video.mp4</span><br /></code><br />That's it!<br /><br /><span style="font-weight: bold;">11) What's next<br /><br /></span>These examples should get you started. I will be adding tips and tricks as I am faced with increasingly hostile <span style="font-style: italic;">mkv</span> files ;) In the meantime, have fun and as always, all comments welcome.<br /><br /><span style="font-style: italic;">Updated 2009/01/16: </span><a style="font-style: italic;" href="http://juliensimon.blogspot.com/2009/01/howto-processing-multichannel-audio-dts.html">this post</a><span style="font-style: italic;"> has more advanced information on DTS to AC3 conversion.</span>
