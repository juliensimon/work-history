<a href="http://www.virtualbox.org/"><span class="searchword0">Virtual</span><span class="searchword1">Box</span></a> has special software that can be installed inside Windows and Linux <span class="searchword0">virtual</span> machines to improve performance and make integration much more seamless. Among the features provided by these <span class="searchword2">Guest</span> <span class="searchword3">Additions</span> are mouse pointer integration and arbitrary screen solutions (e.g. by resizing the <span class="searchword2">guest</span> window).<br /><br />For some reason, I have never installed them on my <a href="http://www.blogger.com/www.centos.org">CentOS</a> 5.2 image... and I suddenly feel compelled to :)<br /><br />So, let's open VirtualBox, start the CentOS image and log in.<br /><br />Now, on the host system, you need to locate the ISO image which contains the guest additions software : on my Ubuntu box, it was installed as /usr/share/virtualbox/VBoxGuestAdditions.iso.<br /><br />Now, in the VirtualBox menu bar, go to <span style="font-style: italic;">Devices</span>, <span style="font-style: italic;">Mount CD/DVD-ROM image</span>, <span style="font-style: italic;">CD/DVD-ROM image...</span> Add VBoxGuestAdditions.iso to the list and select it.<br /><br />If your guest image is running X, the image should be mounted automatically in /media and appear on your desktop.<br /><br />If X isn't running (that's my case), you need to mount the image. So, on the guest system (not on the host!):<br /><br /><code>[julien@centos ~]$ <span style="font-weight: bold;">sudo mount -o ro -t iso9660 /dev/cdrom /mnt/cdrom<br /><br /></span></code>OK, now let's run the installation script:<br /><br /><code>[julien@centos ~]$ <span style="font-weight: bold;">sudo sh /mnt/cdrom/VBoxLinuxAdditions.run </span><br />Verifying archive integrity... All good.<br />Uncompressing VirtualBox 1.6.6 Guest Additions for Linux installation.............................................................................................................................................................................<br />VirtualBox 1.6.6 Guest Additions installation<br />Please install the build and header files for your current Linux kernel.<br />The current kernel version is 2.6.18-92.1.18.el5<br />Please install the GNU compiler.<br />Problems were found which would prevent the Guest Additions from installing.<br />Please correct these problems and try again.<br /></code><br />Oops. Installing guest additions requires a build phase and this box is missing the appropriate tools, i.e.the kernel development kit and the GNU compiler.<br /><br />Let's add them, but first let's check the kernel version:<br /><code><br />[julien@centos ~]$ <span style="font-weight: bold;">uname -a</span><br />Linux centos 2.6.18-92.1.18.el5 #1 SMP Wed Nov 12 09:30:27 EST 2008 i686 i686 i386 GNU/Linux<br /></code><code><br />[julien@centos ~]$ <span style="font-weight: bold;">uname -r</span><br />2.6.18-92.1.18.el5<br /></code><code><br /></code>Now, let's install the kernel development kit matching the kernel version:<br /><br /><code>[julien@centos ~]$ <span style="font-weight: bold;">sudo yum install kernel-devel-`uname -r`</span><br />Password:<br />Loading "fastestmirror" plugin<br />Loading mirror speeds from cached hostfile<br />* base: centos.intergenia.de<br />* updates: ftp.free.fr<br />* addons: ftp.free.fr<br />* extras: centos.intergenia.de<br />Setting up Install Process<br />Parsing package install arguments<br />Resolving Dependencies<br />--> Running transaction check<br />---> Package kernel-devel.i686 0:2.6.18-92.1.18.el5 set to be installed<br />--> Finished Dependency Resolution<br /><br />Dependencies Resolved<br /><br />=============================================================================<br />Package                 Arch       Version          Repository        Size<br />=============================================================================<br />Installing:<br />kernel-devel            i686       2.6.18-92.1.18.el5  updates           4.8 M<br /><br />Transaction Summary<br />=============================================================================<br />Install      1 Package(s)      <br />Update       0 Package(s)      <br />Remove       0 Package(s)      <br /><br />Total download size: 4.8 M<br />Is this ok [y/N]:<br />Downloading Packages:<br />(1/1): kernel-devel-2.6.1 100% |=========================| 4.8 MB    00:15  <br />Running rpm_check_debug<br />Running Transaction Test<br />Finished Transaction Test<br />Transaction Test Succeeded<br />Running Transaction<br />Installing: kernel-devel                 ######################### [1/1]<br /><br />Installed: kernel-devel.i686 0:2.6.18-92.1.18.el5<br />Complete!<br /></code><code><br /></code>Good. Now, the GNU compiler:<br /><br /><code>[julien@centos ~]$ <span style="font-weight: bold;">sudo yum install gcc</span><br />Loading "fastestmirror" plugin<br />Loading mirror speeds from cached hostfile<br />* base: centos.intergenia.de<br />* updates: ftp.plusline.de<br />* addons: ftp.free.fr<br />* extras: centos.intergenia.de<br />Setting up Install Process<br />Parsing package install arguments<br />Resolving Dependencies<br />--> Running transaction check<br />---> Package gcc.i386 0:4.1.2-42.el5 set to be updated<br />--> Processing Dependency: glibc-devel >= 2.2.90-12 for package: gcc<br />--> Running transaction check<br />---> Package glibc-devel.i386 0:2.5-24.el5_2.2 set to be updated<br />--> Processing Dependency: glibc-headers = 2.5-24.el5_2.2 for package: glibc-devel<br />--> Processing Dependency: glibc-headers for package: glibc-devel<br />--> Running transaction check<br />---> Package glibc-headers.i386 0:2.5-24.el5_2.2 set to be updated<br />--> Processing Dependency: kernel-headers for package: glibc-headers<br />--> Processing Dependency: kernel-headers >= 2.2.1 for package: glibc-headers<br />--> Running transaction check<br />---> Package kernel-headers.i386 0:2.6.18-92.1.22.el5 set to be updated<br />--> Finished Dependency Resolution<br /><br />Dependencies Resolved<br /><br />=============================================================================<br />Package                 Arch       Version          Repository        Size<br />=============================================================================<br />Installing:<br />gcc                     i386       4.1.2-42.el5     base              5.2 M<br />Installing for dependencies:<br />glibc-devel             i386       2.5-24.el5_2.2   updates           2.0 M<br />glibc-headers           i386       2.5-24.el5_2.2   updates           611 k<br />kernel-headers          i386       2.6.18-92.1.22.el5  updates           854 k<br /><br />Transaction Summary<br />=============================================================================<br />Install      4 Package(s)      <br />Update       0 Package(s)      <br />Remove       0 Package(s)      <br /><br />Total download size: 8.7 M<br />Is this ok [y/N]: y<br />Downloading Packages:<br />(1/4): glibc-devel-2.5-24 100% |=========================| 2.0 MB    00:03  <br />(2/4): gcc-4.1.2-42.el5.i 100% |=========================| 5.2 MB    00:14  <br />(3/4): kernel-headers-2.6 100% |=========================| 854 kB    00:02  <br />(4/4): glibc-headers-2.5- 100% |=========================| 611 kB    00:01  <br />Running rpm_check_debug<br />Running Transaction Test<br />Finished Transaction Test<br />Transaction Test Succeeded<br />Running Transaction<br />Installing: kernel-headers               ######################### [1/4]<br />Installing: glibc-headers                ######################### [2/4]<br />Installing: glibc-devel                  ######################### [3/4]<br />Installing: gcc                          ######################### [4/4]<br /><br />Installed: gcc.i386 0:4.1.2-42.el5<br />Dependency Installed: glibc-devel.i386 0:2.5-24.el5_2.2 glibc-headers.i386 0:2.5-24.el5_2.2 kernel-headers.i386 0:2.6.18-92.1.22.el5<br />Complete!<br /></code><br />Good to go. Let's run that installation script again:<br /><code><br />[julien@centos ~]$ <span style="font-weight: bold;">sudo sh /mnt/cdrom/VBoxLinuxAdditions.run </span><br />Verifying archive integrity... All good.<br />Uncompressing VirtualBox 1.6.6 Guest Additions for Linux installation.............................................................................................................................................................................<br />VirtualBox 1.6.6 Guest Additions installation<br />Building the VirtualBox Guest Additions kernel module...<br />Building the shared folder support kernel module...<br />Installing the VirtualBox Guest Additions...<br /><br />Successfully installed the VirtualBox Guest Additions.<br />You must restart your guest system in order to complete the installation.<br /><br />[julien@centos ~]$ <span style="font-weight: bold;">reboot<br /></span></code><code><br /></code>Done! That wasn't so bad, was it?
